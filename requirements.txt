# =============================================================================
# Friendly Spot - Master Requirements
# =============================================================================
# Comprehensive dependencies for full perception → behavior → execution pipeline.
# Includes all modules: perception, emotion/face recognition, YOLO detection,
# Spot SDK integration.
#
# PLATFORM REQUIREMENTS:
#   - Python 3.9-3.10 (Spot SDK: 3.7-3.10, MediaPipe: 3.8-3.11)
#   - Python 3.11+ NOT SUPPORTED by Spot SDK
#   - Windows: x86_64 only (no ARM64)
#   - macOS: For GPU on M1/M2, also install: pip install tensorflow-metal
#   - Linux: Best support; ARM64 requires custom TensorFlow build
#
# INSTALLATION:
#   pip install -r requirements.txt
#
# For offline environments, pre-download models:
#   python scripts/download_models.py
# =============================================================================

# Boston Dynamics Spot SDK
--find-links ../spot-sdk/prebuilt
bosdyn-api==5.0.1.2
bosdyn-client==5.0.1.2
bosdyn-core==5.0.1.2
bosdyn-mission==5.0.1.2
bosdyn-orbit==5.0.1.2
bosdyn-scout==5.0.1.2
bosdyn-choreography-client==5.0.1.2
bosdyn-choreography-protos==5.0.1.2

# Core numerical + CV stack
numpy==1.26.4  # CRITICAL: Pin to 1.x - compatible with all packages
opencv-contrib-python==4.11.0.86  # Latest stable

# MediaPipe hands/pose for perception pipeline
# NOTE: Requires Python 3.8-3.11, no 3.12+ support yet
# CRITICAL FIX: MediaPipe 0.10.9 is the last version WITHOUT TensorFlow import hang on Windows
# Versions 0.10.10+ try to import tensorflow.tools.docs which causes hang
mediapipe==0.10.9

# Deep learning frameworks
# WINDOWS GPU SUPPORT: TensorFlow 2.10 is the LAST version with native Windows GPU support
# TF 2.11+ requires WSL2 for GPU on Windows (TF 2.16+ restored support but incompatible with MediaPipe 0.10.9)
# GPU REQUIREMENTS for TensorFlow 2.10:
#   - CUDA 11.2 + cuDNN 8.1 (install system-wide from NVIDIA)
#   - NVIDIA driver >= 450.80.02 (RTX 3050 with driver 576.83 is compatible)
#   - tensorflow-gpu==2.10.1 (separate GPU package for Windows)
# IMPORTANT: MediaPipe 0.10.9 has NO TensorFlow dependency - fully compatible
tensorflow-gpu==2.10.1  # Last native Windows GPU support (requires CUDA 11.2 + cuDNN 8.1)
keras==2.10.0  # Must match TensorFlow 2.10

# Face recognition + emotion analysis
deepface==0.0.95  # Works with TF 2.10 + Keras 2.10 + tf-keras 2.10

# YOLO person detection (for people_observer module)
# PyTorch CUDA INDEPENDENCE: PyTorch wheels bundle their own CUDA runtime (12.1 in +cu121)
# Does NOT require system CUDA installation - only needs NVIDIA driver
# TensorFlow (CUDA 11.2) and PyTorch (bundled CUDA 12.1) coexist without conflicts
# Installation: pip install torch==2.9.1 torchvision==0.24.1 --index-url https://download.pytorch.org/whl/cu126
torch==2.9.1+cu126  # Latest with bundled CUDA 12.1 runtime
torchvision==0.24.1+cu126  # Must match torch 2.9.1
ultralytics==8.3.228 --no-deps  # Latest version (compatible with PyTorch 2.x)

# Misc utilities (pulled by DeepFace/YOLO, pinned to avoid resolver conflicts)
scipy==1.15.3  # Updated for better performance
pandas==2.3.3
matplotlib==3.10.7
Pillow>=12.0.0

# Protobuf compatibility
# MediaPipe 0.10.9 requires: protobuf<4,>=3.11
# TensorFlow 2.15 works with: protobuf>=3.20.3,<5.0
# Pinning to protobuf 3.20.3 for maximum compatibility
protobuf==3.20.3

# Optional: For servers/Docker (headless environments)
# Uncomment and replace opencv-contrib-python with:
# opencv-contrib-python-headless==4.10.0.84
